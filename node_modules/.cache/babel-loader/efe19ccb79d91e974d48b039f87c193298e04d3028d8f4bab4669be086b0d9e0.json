{"ast":null,"code":"var _jsxFileName = \"E:\\\\CNPM\\\\Project\\\\App\\\\client\\\\src\\\\menu\\\\MenuLayout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Avatar, IconButton } from '@mui/material';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Component1 from './Component1';\nimport Component2 from './Component2';\nimport Component3 from './Component3';\nimport Component4 from './Component4';\nimport UserProfile from '../user_info/user_menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MenuLayout = ({\n  onLogout\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [openUserMenu, setOpenUserMenu] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const checkAuth = async () => {\n      const token = localStorage.getItem('token');\n      const savedUser = localStorage.getItem('user');\n      if (!token) {\n        setIsLoading(false);\n        navigate('/login');\n        return;\n      }\n      if (savedUser) {\n        setUser(JSON.parse(savedUser));\n      }\n      try {\n        const response = await axios.get('http://localhost:3000/api/auth/verify', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (response.data.valid) {\n          setUser(response.data.user);\n          localStorage.setItem('user', JSON.stringify(response.data.user));\n        }\n      } catch (error) {\n        var _error$response;\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          navigate('/login');\n        }\n        console.error('Lỗi xác thực:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAuth();\n  }, [navigate]);\n  if (isLoading) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      display: 'flex',\n      height: '100vh',\n      width: '100vw',\n      p: 1,\n      borderRadius: '18px',\n      overflow: 'hidden',\n      backgroundColor: '#f5f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Component1, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        marginLeft: '160px',\n        overflow: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: '80%',\n          margin: '0 auto 40px',\n          height: 80,\n          backgroundImage: 'url(/logo.png)',\n          backgroundSize: 'contain',\n          backgroundRepeat: 'no-repeat',\n          backgroundPosition: 'center',\n          borderRadius: '16px',\n          overflow: 'hidden'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Component2, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Component4, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Component3, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'absolute',\n        top: 30,\n        right: 30,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 1.75,\n        zIndex: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"notifications\",\n        sx: {\n          width: 60,\n          height: 60,\n          bgcolor: 'transparent',\n          '&:hover': {\n            bgcolor: 'rgba(0, 0, 0, 0.1)'\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(NotificationsIcon, {\n          sx: {\n            fontSize: 30\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => setOpenUserMenu(true),\n        sx: {\n          p: 0,\n          '&:hover': {\n            opacity: 0.8\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          alt: \"User Avatar\",\n          src: \"/path/to/avatar.jpg\",\n          sx: {\n            width: 57,\n            height: 57\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserProfile, {\n      open: openUserMenu,\n      onClose: () => setOpenUserMenu(false),\n      onLogout: onLogout,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(MenuLayout, \"oSx3W++8YH7wEGumDzz+paLm/2U=\", false, function () {\n  return [useNavigate];\n});\n_c = MenuLayout;\nexport default MenuLayout;\nvar _c;\n$RefreshReg$(_c, \"MenuLayout\");","map":{"version":3,"names":["React","useState","useEffect","Box","Avatar","IconButton","NotificationsIcon","useNavigate","axios","Component1","Component2","Component3","Component4","UserProfile","jsxDEV","_jsxDEV","MenuLayout","onLogout","_s","navigate","openUserMenu","setOpenUserMenu","isLoading","setIsLoading","user","setUser","checkAuth","token","localStorage","getItem","savedUser","JSON","parse","response","get","headers","data","valid","setItem","stringify","error","_error$response","status","removeItem","console","sx","display","height","width","p","borderRadius","overflow","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","flex","flexDirection","marginLeft","margin","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","position","top","right","alignItems","gap","zIndex","bgcolor","fontSize","onClick","opacity","alt","src","open","onClose","_c","$RefreshReg$"],"sources":["E:/CNPM/Project/App/client/src/menu/MenuLayout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Box, Avatar, IconButton } from '@mui/material';\r\nimport NotificationsIcon from '@mui/icons-material/Notifications';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Component1 from './Component1';\r\nimport Component2 from './Component2';\r\nimport Component3 from './Component3';\r\nimport Component4 from './Component4';\r\nimport UserProfile from '../user_info/user_menu';\r\n\r\nconst MenuLayout = ({ onLogout }) => {\r\n  const navigate = useNavigate();\r\n  const [openUserMenu, setOpenUserMenu] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const token = localStorage.getItem('token');\r\n      const savedUser = localStorage.getItem('user');\r\n      \r\n      if (!token) {\r\n        setIsLoading(false);\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      if (savedUser) {\r\n        setUser(JSON.parse(savedUser));\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get('http://localhost:3000/api/auth/verify', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        if (response.data.valid) {\r\n          setUser(response.data.user);\r\n          localStorage.setItem('user', JSON.stringify(response.data.user));\r\n        }\r\n      } catch (error) {\r\n        if (error.response?.status === 401) {\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('user');\r\n          navigate('/login');\r\n        }\r\n        console.error('Lỗi xác thực:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [navigate]);\r\n\r\n  if (isLoading) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        height: '100vh',\r\n        width: '100vw',\r\n        p: 1,\r\n        borderRadius: '18px',\r\n        overflow: 'hidden',\r\n        backgroundColor: '#f5f5f5',\r\n      }}\r\n    >\r\n      {/* Component 1 */}\r\n      <Component1 user={user} />\r\n\r\n      {/* Main Content */}\r\n      <Box sx={{ \r\n        flex: 1,\r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        marginLeft: '160px',\r\n        overflow: 'auto',\r\n      }}>\r\n        {/* Logo phía trên Lịch với borderRadius */}\r\n        <Box\r\n          sx={{\r\n            width: '80%',\r\n            margin: '0 auto 40px',\r\n            height: 80,\r\n            backgroundImage: 'url(/logo.png)',\r\n            backgroundSize: 'contain',\r\n            backgroundRepeat: 'no-repeat',\r\n            backgroundPosition: 'center',\r\n            borderRadius: '16px',\r\n            overflow: 'hidden',\r\n          }}\r\n        />\r\n\r\n        {/* Component 2 - Lịch */}\r\n        <Component2 />\r\n\r\n        {/* Component 4 - Thanh tìm kiếm */}\r\n        <Component4 />\r\n\r\n        {/* Component 3 */}\r\n        <Component3 />\r\n      </Box>\r\n\r\n      {/* Avatar và nút chuông */}\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 30,\r\n          right: 30,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1.75,\r\n          zIndex: 20,\r\n        }}\r\n      >\r\n        {/* Nút hình chuông */}\r\n        <IconButton\r\n          aria-label=\"notifications\"\r\n          sx={{\r\n            width: 60,\r\n            height: 60,\r\n            bgcolor: 'transparent',\r\n            '&:hover': {\r\n              bgcolor: 'rgba(0, 0, 0, 0.1)',\r\n            },\r\n          }}\r\n        >\r\n          <NotificationsIcon sx={{ fontSize: 30 }} />\r\n        </IconButton>\r\n\r\n        {/* Avatar với onClick */}\r\n        <IconButton\r\n          onClick={() => setOpenUserMenu(true)}\r\n          sx={{\r\n            p: 0,\r\n            '&:hover': {\r\n              opacity: 0.8,\r\n            },\r\n          }}\r\n        >\r\n          <Avatar\r\n            alt=\"User Avatar\"\r\n            src=\"/path/to/avatar.jpg\"\r\n            sx={{ \r\n              width: 57, \r\n              height: 57 \r\n            }}\r\n          />\r\n        </IconButton>\r\n      </Box>\r\n\r\n      {/* UserProfile component */}\r\n      <UserProfile \r\n        open={openUserMenu}\r\n        onClose={() => setOpenUserMenu(false)}\r\n        onLogout={onLogout}\r\n        user={user}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MenuLayout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}